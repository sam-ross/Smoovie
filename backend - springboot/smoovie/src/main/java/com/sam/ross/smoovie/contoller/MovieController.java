package com.sam.ross.smoovie.contoller;

import com.sam.ross.smoovie.objects.IMDbMovie;
import com.sam.ross.smoovie.objects.IMDbMovieList;
import com.sam.ross.smoovie.objects.WordList;
import com.sam.ross.smoovie.service.MovieService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.io.IOException;
import java.util.HashMap;
import java.util.List;

@RestController
public class MovieController {
    @Autowired
    private MovieService service;

    private final String apiKeyImdb = "";
    private final String apiKeyOpenSubtitles = "";

    @CrossOrigin
    @GetMapping("/ping")
    public ResponseEntity<String> ping() {
        return ResponseEntity.ok("{\"ping\": \"pong\"}");
    }

    @CrossOrigin
    @GetMapping("/imdb/search/{title}")
    public ResponseEntity<IMDbMovieList> searchIMDbMovies(@PathVariable String title) throws IOException,
            InterruptedException {
//        List<IMDbMovie> movies = service.searchIMDbMovies(title, apiKeyImdb);
//        if (movies.size() > 5) {
//            movies = movies.subList(0, 5);
//        }

        IMDbMovie mov1 = IMDbMovie.builder()
                .description("(1994)")
                .id("tt0110912")
                .image("https://m.media-amazon.com/images/M/MV5BNGNhMDIzZTUtNTBlZi00MTRlLWFjM2ItYzViMjE3YzI5MjljXkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_Ratio0.7273_AL_.jpg")
                .resultType("Title")
                .title(title)
                .build();

        List<IMDbMovie> movies = List.of(mov1, mov1, mov1, mov1, mov1);

        return ResponseEntity.ok(IMDbMovieList.builder().movies(movies).build());
    }

    @CrossOrigin
    @GetMapping("/words/{imdbId}")
    public ResponseEntity<WordList> getWordList(@PathVariable String imdbId) throws IOException, InterruptedException {
//        WordList words = service.getWordList(imdbId, apiKeyOpenSubtitles);

//        WordList words = WordList.builder().words(List.of("hello", "sam", "this", "is", "a", "test", "imdbId", imdbId)).build();
        WordList words = WordList.builder().words(getVanillaWords()).build();
        return ResponseEntity.ok(words);
    }

    @CrossOrigin
    @PostMapping("/words/frequency")
//    public ResponseEntity<HashMap<String, Integer>> getWordFrequencies(@RequestBody WordList wordList) {
    public ResponseEntity<HashMap<String, Integer>> getWordFrequencies(@RequestBody List<String> words) {
        HashMap<String, Integer> wordFrequencies = service.getWordFrequencies(words);

        System.out.println(wordFrequencies);

        return ResponseEntity.ok(wordFrequencies);
    }

    @PostMapping("/helloPost")
    public ResponseEntity<String> helloPost(@RequestBody WordList name) {
        return ResponseEntity.ok("Hello postman " + name.getWords());
    }

    private List<String> getVanillaWords() {
        return List.of(
                "who's",
                "that",
                "stumblin'",
                "around",
                "in",
                "the",
                "dark",
                "state",
                "your",
                "business",
                "or",
                "prepare",
                "to",
                "get",
                "winged",
                "calm",
                "yourselves",
                "gentlemen",
                "i",
                "mean",
                "you",
                "no",
                "harm",
                "i'm",
                "simply",
                "a",
                "fellow",
                "weary",
                "traveler",
                "good",
                "cold",
                "evening",
                "gentlemen",
                "i'm",
                "looking",
                "for",
                "a",
                "pair",
                "of",
                "slave",
                "traders",
                "that",
                "go",
                "by",
                "the",
                "name",
                "of",
                "the",
                "speck",
                "brothers",
                "might",
                "that",
                "be",
                "you",
                "who",
                "wants",
                "to",
                "know",
                "well",
                "i",
                "do",
                "i'm",
                "dr",
                "king",
                "schultz",
                "this",
                "is",
                "my",
                "horse",
                "fritz",
                "what",
                "kinda",
                "doctor",
                "dentist",
                "now",
                "are",
                "you",
                "the",
                "speck",
                "brothers",
                "and",
                "did",
                "you",
                "purchase",
                "those",
                "men",
                "at",
                "the",
                "greenville",
                "slave",
                "auction",
                "so",
                "what",
                "so",
                "i",
                "wish",
                "to",
                "parley",
                "with",
                "you",
                "speak",
                "english",
                "oh",
                "i'm",
                "sorry",
                "please",
                "forgive",
                "me",
                "it",
                "is",
                "a",
                "second",
                "language",
                "now",
                "amongst",
                "your",
                "inventory",
                "i've",
                "been",
                "led",
                "to",
                "believe",
                "is",
                "a",
                "specimen",
                "i'm",
                "keen",
                "to",
                "acquire",
                "hello",
                "you",
                "poor",
                "devils",
                "is",
                "there",
                "one",
                "amongst",
                "you",
                "who",
                "was",
                "formerly",
                "a",
                "resident",
                "of",
                "the",
                "carrucan",
                "plantation",
                "i'm",
                "from",
                "the",
                "carrucan",
                "plantation",
                "who",
                "said",
                "that",
                "what's",
                "your",
                "name",
                "django",
                "then",
                "you're",
                "exactly",
                "the",
                "one",
                "i'm",
                "looking",
                "for",
                "do",
                "you",
                "know",
                "who",
                "the",
                "brittle",
                "brothers",
                "are",
                "who",
                "are",
                "they",
                "big",
                "john",
                "ellis",
                "and",
                "roger",
                "sometime",
                "they",
                "call",
                "him",
                "lit'le",
                "raj",
                "they",
                "was",
                "overseers",
                "at",
                "carrucan",
                "plantation",
                "not",
                "anymore",
                "tell",
                "me",
                "if",
                "you",
                "were",
                "to",
                "see",
                "any",
                "of",
                "these",
                "three",
                "gentlemen",
                "again",
                "would",
                "you",
                "recognize",
                "them",
                "hey",
                "stop",
                "talk",
                "with",
                "'em",
                "like",
                "that",
                "like",
                "what",
                "like",
                "that",
                "my",
                "good",
                "man",
                "i'm",
                "simply",
                "trying",
                "to",
                "ascertain",
                "speak",
                "english",
                "goddammit",
                "everybody",
                "calm",
                "down",
                "i'm",
                "simply",
                "a",
                "customer",
                "trying",
                "to",
                "conduct",
                "a",
                "transaction",
                "i",
                "don't",
                "care",
                "no",
                "sale",
                "now",
                "off",
                "wit'",
                "you",
                "oh",
                "don't",
                "be",
                "ridiculous",
                "o'course",
                "they're",
                "for",
                "sale",
                "move",
                "it",
                "my",
                "good",
                "man",
                "did",
                "you",
                "simply",
                "get",
                "carried",
                "away",
                "with",
                "your",
                "dramatic",
                "gesture",
                "or",
                "are",
                "you",
                "pointing",
                "your",
                "weapon",
                "at",
                "me",
                "with",
                "lethal",
                "intention",
                "last",
                "chance",
                "fancy",
                "pants",
                "oh",
                "very",
                "well",
                "i'm",
                "sorry",
                "to",
                "have",
                "put",
                "a",
                "bullet",
                "in",
                "your",
                "beast",
                "but",
                "i",
                "didn't",
                "want",
                "you",
                "to",
                "do",
                "anything",
                "rash",
                "before",
                "you",
                "had",
                "a",
                "moment",
                "to",
                "come",
                "to",
                "your",
                "senses",
                "goddamn",
                "son",
                "of",
                "a",
                "bitch",
                "you",
                "shot",
                "roscoe",
                "and",
                "you",
                "killed",
                "ace",
                "hey",
                "i",
                "only",
                "shot",
                "your",
                "brother",
                "once",
                "he",
                "threatened",
                "to",
                "shoot",
                "me",
                "and",
                "i",
                "do",
                "believe",
                "i",
                "have",
                "one",
                "two",
                "three",
                "four",
                "five",
                "witnesses",
                "who",
                "can",
                "attest",
                "to",
                "that",
                "fact",
                "damn",
                "leg's",
                "busted",
                "no",
                "doubt",
                "now",
                "if",
                "you",
                "can",
                "keep",
                "your",
                "caterwauling",
                "down",
                "to",
                "a",
                "minimum",
                "i'd",
                "like",
                "to",
                "finish",
                "my",
                "line",
                "of",
                "inquiry",
                "with",
                "young",
                "django",
                "god",
                "fucking",
                "dammit",
                "as",
                "i",
                "was",
                "saying",
                "if",
                "you",
                "were",
                "to",
                "see",
                "the",
                "brittle",
                "brothers",
                "again",
                "you",
                "could",
                "recognize",
                "them",
                "yeah",
                "sold",
                "american",
                "so",
                "mr",
                "speck",
                "mr",
                "speck",
                "how",
                "much",
                "for",
                "young",
                "django",
                "here",
                "that",
                "iron",
                "is",
                "nasty",
                "business",
                "could",
                "you",
                "hold",
                "this",
                "for",
                "a",
                "moment",
                "thank",
                "you",
                "django",
                "get",
                "up",
                "on",
                "that",
                "horse",
                "also",
                "if",
                "i",
                "were",
                "you",
                "i'd",
                "take",
                "that",
                "winter",
                "coat",
                "the",
                "dear",
                "departed",
                "speck",
                "left",
                "behind",
                "nigger",
                "don't",
                "you",
                "touch",
                "my",
                "brother's",
                "coat",
                "goddammit",
                "one",
                "hundred",
                "ten",
                "twenty",
                "and",
                "five",
                "for",
                "young",
                "django",
                "here"
        );
    }
}
